@startuml conatiner-diagram
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

Person(farmer, "Farmer/Land Owner")
System_Ext(usgs, "USGS API", "Provides elevation data")
System_Ext(regrid, "Regrid API", "Provides parcel & zoning data")
System_Ext(gbif, "GBIF API", "Provides plant data")
System_Ext(grants, "Grants.gov API", "Provides federal grant data")

System_Boundary(c1, "Automated Agroforestry Platform") {
    Container(frontend, "React Frontend", "JavaScript", "Provides the user interface and visualizations.")
    Container(backend, "Python Backend", "FastAPI", "Handles business logic, analysis, and data processing.")
    ContainerDb(database, "PostGIS Database", "PostgreSQL", "Stores all geospatial, project, and user data.")
    Container(scraper, "Scrapy Spiders", "Python", "Periodically scrapes data from sources without APIs.")
}

Rel(farmer, frontend, "Uses")
Rel(frontend, backend, "Makes API calls to", "JSON/HTTP")

Rel(backend, database, "Reads from and writes to")
Rel(backend, usgs, "Fetches elevation data from", "HTTP/API")
Rel.right(backend, regrid, "Fetches parcel data from", "HTTP/API")
Rel(backend, gbif, "Fetches plant data from", "HTTP/API")
Rel(backend, grants, "Fetches grant data from", "HTTP/API")
Rel(backend, scraper, "Triggers and retrieves data from")

@enduml